<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Police OT</title>

<!-- ================= SAFE TO EDIT ================= -->
<!-- You may change colours, fonts, spacing, text -->
<style>
:root{--blue:#0a3a8f}
*{box-sizing:border-box}

body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial;
background:#f2f2f7;
padding-bottom:60px;
}

h1,h2{text-align:center;margin:12px 0}
label{font-size:.85rem;font-weight:600}

input,select,button{
width:100%;
padding:10px;
margin-top:6px;
border-radius:10px;
border:1px solid #ccc;
font-size:.9rem;
text-align:left;
}

.card{
max-width:420px;
margin:70px auto 24px;
background:#fff;
border-radius:16px;
padding:16px;
box-shadow:0 8px 20px rgba(0,0,0,.08);
}

.field{margin-top:10px}

button.primary{
background:var(--blue);
color:#fff;
border:none;
font-weight:700;
margin-top:12px;
}

.entry{
background:#fff;
border-radius:12px;
padding:10px;
margin-top:10px;
font-size:.85rem;
}

.entry img{
max-width:100%;
border-radius:8px;
margin-top:6px;
}

.entry-actions{
display:flex;
gap:8px;
margin-top:6px;
}

.entry-actions button{
flex:1;
padding:6px;
font-size:.8rem;
}

/* Menu */
#menuBtn{
position:fixed;
top:12px;
right:12px;
width:44px;
height:44px;
border-radius:12px;
border:none;
background:var(--blue);
color:#fff;
font-size:22px;
z-index:2000;
}

#sideMenu{
position:fixed;
top:0;
left:-260px;
width:240px;
height:100%;
background:var(--blue);
padding:20px;
transition:left .3s;
z-index:1999;
}

#sideMenu h3{color:#fff;margin-top:40px}

#sideMenu button{
width:100%;
padding:12px;
border:none;
border-radius:10px;
margin:10px 0;
font-weight:700;
}
</style>
<!-- ================= END SAFE TO EDIT ================= -->
</head>

<body>

<button id="menuBtn">☰</button>

<div id="sideMenu">
<h3>Menu</h3>
<button onclick="show('ot')">Police Overtime</button>
<button onclick="show('log')">Log</button>
<button onclick="clearAll()">Clear All Data</button>
</div>

<!-- ================= UI (SAFE TEXT EDITS ONLY) ================= -->
<div class="card" id="screen-ot">
<h2>Police Overtime</h2>

<div class="field">
<label>Force</label>
<select id="force">
<option value="met">Metropolitan Police</option>
<option value="other">Other Home Office Force</option>
</select>
</div>

<div class="field">
<label>Warrant Number</label>
<input id="warrant" placeholder="P123456">
</div>

<div class="field">
<label>Date</label>
<input type="date" id="date">
</div>

<div class="field">
<label>Start Time</label>
<input type="time" id="start">
</div>

<div class="field">
<label>Finish Time</label>
<input type="time" id="finish">
</div>

<div class="field">
<label>Total Hours</label>
<input id="hours" readonly>
</div>

<div class="field">
<label>Expense</label>
<select id="expense">
<option value="0">None</option>
<option value="7.5">Breakfast £7.50</option>
<option value="7.5">Lunch £7.50</option>
<option value="15">Dinner £15.00</option>
</select>
</div>

<div class="field">
<label>Receipt</label>
<input type="file" id="receipt" accept="image/*">
</div>

<button class="primary" onclick="saveOT()">Save Overtime</button>
</div>

<div class="card" id="screen-log" style="display:none">
<h2>Log</h2>
<div id="log"></div>
</div>
<!-- ================= END UI ================= -->

<!-- ================= DO NOT EDIT ================= -->
<script>
const STORE='policeOT';
const qs=i=>document.getElementById(i);

/* Time calculation (15 min rounding) */
function hoursBetween(s,f){
if(!s||!f)return'';
let [sh,sm]=s.split(':').map(Number);
let [fh,fm]=f.split(':').map(Number);
let m=(fh*60+fm)-(sh*60+sm);
if(m<0)m+=1440;
return (Math.round(m/15)*15/60).toFixed(2);
}

['start','finish'].forEach(i=>{
qs(i).onchange=()=>{
qs('hours').value=hoursBetween(qs('start').value,qs('finish').value);
};
});

/* Storage */
function load(){return JSON.parse(localStorage.getItem(STORE)||'[]')}
function save(d){localStorage.setItem(STORE,JSON.stringify(d))}

/* Save overtime */
function saveOT(){
const img=qs('receipt').files[0]
?URL.createObjectURL(qs('receipt').files[0])
:null;

const d=load();
d.push({
force:qs('force').value,
warrant:qs('warrant').value,
date:qs('date').value,
start:qs('start').value,
finish:qs('finish').value,
hours:qs('hours').value,
expense:qs('expense').value,
receipt:img
});
save(d);
renderLog();
show('log');
}

/* Render log */
function renderLog(){
qs('log').innerHTML='';
load().forEach((e,i)=>{
qs('log').innerHTML+=`
<div class="entry">
<b>${e.force.toUpperCase()}</b><br>
${e.warrant}<br>
${e.date}<br>
${e.start}-${e.finish} (${e.hours}h)<br>
Expense £${e.expense}
${e.receipt?`<img src="${e.receipt}">`:''}
<div class="entry-actions">
<button onclick="del(${i})">Delete</button>
</div>
</div>`;
});
}

/* Delete */
function del(i){
let d=load();
d.splice(i,1);
save(d);
renderLog();
}

/* Clear all */
function clearAll(){
localStorage.removeItem(STORE);
renderLog();
alert('All data cleared');
}

/* Navigation */
function show(s){
['ot','log'].forEach(x=>qs('screen-'+x).style.display='none');
qs('screen-'+s).style.display='block';
qs('sideMenu').style.left='-260px';
}

qs('menuBtn').onclick=()=>{
qs('sideMenu').style.left=
qs('sideMenu').style.left==='0px'
?'-260px':'0px';
};
</script>
<!-- ================= END DO NOT EDIT ================= -->

</body>
</html>
