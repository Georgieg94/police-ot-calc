<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Police OT</title>

<style>
/* ================= ROOT ================= */
:root{
--blue:#0a3a8f;
--bg:#f2f2f7;
--card:#ffffff;
--muted:#6b7280;
}

/* ================= RESET ================= */
*{box-sizing:border-box}
body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial;
background:var(--bg);
padding-bottom:40px;
}
h1,h2,h3{text-align:center;margin:12px 0}
label{font-size:.85rem;font-weight:600}

/* ================= INPUTS ================= */
input,select,button{
width:100%;
padding:10px;
margin-top:6px;
border-radius:10px;
border:1px solid #ccc;
font-size:.9rem;
text-align:left;
}

/* ================= CARDS ================= */
.card{
max-width:420px;
margin:70px auto 24px;
background:var(--card);
border-radius:16px;
padding:16px;
box-shadow:0 8px 20px rgba(0,0,0,.08);
}
.field{margin-top:10px}

/* ================= BUTTONS ================= */
button.primary{
background:var(--blue);
color:#fff;
border:none;
font-weight:700;
margin-top:12px;
cursor:pointer;
}
button{
cursor:pointer;
}

/* ================= RESULTS ================= */
.result{
background:#f5f5f7;
border-radius:12px;
padding:12px;
margin-top:12px;
}
.row{
display:flex;
justify-content:space-between;
margin:6px 0;
font-size:.9rem;
}

/* ================= LOG ================= */
.entry{
background:#fff;
border-radius:12px;
padding:10px;
margin-top:10px;
font-size:.85rem;
}
.entry img{
max-width:100%;
border-radius:8px;
margin-top:6px;
}
.entry-actions{
display:flex;
gap:8px;
margin-top:6px;
}
.entry-actions button{
flex:1;
padding:6px;
font-size:.8rem;
}

/* ================= MENU ================= */
#menuBtn{
position:fixed;
top:12px;
right:12px;
width:44px;
height:44px;
border-radius:12px;
border:none;
background:var(--blue);
color:#fff;
font-size:22px;
z-index:2000;
}
#sideMenu{
position:fixed;
top:0;
left:-260px;
width:240px;
height:100%;
background:var(--blue);
padding:20px;
transition:left .3s;
z-index:1999;
}
#sideMenu h3{color:#fff;margin-top:40px}
#sideMenu button{
width:100%;
padding:12px;
border:none;
border-radius:10px;
margin:10px 0;
font-weight:700;
}

/* ================= DISCLAIMER ================= */
#disclaimer{
position:fixed;
inset:0;
background:rgba(0,0,0,.6);
display:flex;
align-items:center;
justify-content:center;
z-index:5000;
}
</style>
</head>

<body>

<!-- ================= DISCLAIMER ================= -->
<div id="disclaimer">
<div style="background:#fff;border-radius:16px;padding:20px;max-width:360px;width:90%">
<h2>Disclaimer</h2>
<p style="font-size:.9rem;line-height:1.45">
Figures are guidance only and may be inaccurate following pay awards.
This tool is not an official calculator.
</p>
<label style="display:flex;align-items:center;font-size:.85rem">
<input type="checkbox" id="dontShowAgain" style="margin-right:8px">
Don’t show again
</label>
<button class="primary" onclick="acceptDisclaimer()">I Understand</button>
</div>
</div>

<button id="menuBtn">☰</button>

<div id="sideMenu">
<h3>Menu</h3>
<button onclick="show('ot')">Police Overtime</button>
<button onclick="show('acting')">Acting Up</button>
<button onclick="show('log')">Log</button>
<button onclick="clearAll()">Clear All Data</button>
</div>

<!-- ================= OVERTIME ================= -->
<div class="card" id="screen-ot">
<h2>Police Overtime</h2>

<div class="field">
<label>Force</label>
<select id="force">
<option value="met">Metropolitan Police</option>
<option value="other">Other Home Office Force</option>
</select>
</div>

<div class="field">
<label>Warrant Number</label>
<input id="warrant" placeholder="P123456">
</div>

<div class="field">
<label>Rank</label>
<select id="otRank">
<option value="PC">PC</option>
<option value="PS">PS</option>
</select>
</div>

<div class="field">
<label>Pay Point</label>
<select id="otPoint"></select>
</div>

<div class="field">
<label>Date</label>
<input type="date" id="otDate">
</div>

<div class="field">
<label>Start Time</label>
<input type="time" id="otStart">
</div>

<div class="field">
<label>Finish Time</label>
<input type="time" id="otFinish">
</div>

<div class="field">
<label>Total Hours</label>
<input id="otHours" readonly>
</div>

<div class="field">
<label>OT Rate</label>
<select id="otRate">
<option value="1.3333">Standard (1⅓)</option>
<option value="1.5">Rest Day (1½)</option>
<option value="2">Cancelled RD (Double)</option>
</select>
</div>

<div class="field">
<label>Expense</label>
<select id="expense">
<option value="0">None</option>
<option value="7.5">£7.50 Meal</option>
<option value="15">£15.00 Meal</option>
</select>
</div>

<div class="result">
<div class="row"><span>Base Hourly</span><strong>£<span id="base">0.00</span></strong></div>
<div class="row"><span>OT Hourly</span><strong>£<span id="ot">0.00</span></strong></div>
<div class="row"><span>Gross</span><strong>£<span id="gross">0.00</span></strong></div>
<div class="row"><span>Tax & NI</span><strong>£<span id="tax">0.00</span></strong></div>
<div class="row"><span>Total</span><strong>£<span id="total">0.00</span></strong></div>
</div>

<button class="primary" onclick="saveOT()">Save Overtime</button>
<button onclick="exportOTPDF()">Export Claim (PDF)</button>
<button onclick="exportOTCalendar()">Export to Calendar</button>
</div>

<!-- ================= ACTING UP ================= -->
<div class="card" id="screen-acting" style="display:none">
<h2>Acting Up Allowance</h2>

<div class="field">
<label>Current Rank</label>
<select id="curRank">
<option value="PC">PC</option>
<option value="PS">PS</option>
</select>
</div>

<div class="field">
<label>Current Pay Point</label>
<select id="curPoint"></select>
</div>

<div class="field">
<label>Acting Rank</label>
<select id="actRank">
<option value="PS">Sergeant</option>
<option value="INSP">Inspector</option>
</select>
</div>

<div class="field">
<label>Date</label>
<input type="date" id="actDate">
</div>

<div class="field">
<label>Start</label>
<input type="time" id="actStart">
</div>

<div class="field">
<label>Finish</label>
<input type="time" id="actFinish">
</div>

<div class="field">
<label>Total Hours</label>
<input id="actHours" readonly>
</div>

<div class="result">
<div class="row"><span>Total</span><strong>£<span id="actTotal">0.00</span></strong></div>
</div>

<button class="primary" onclick="saveActing()">Save Acting Up</button>
<button onclick="exportActingCalendar()">Export to Calendar</button>
</div>

<!-- ================= LOG ================= -->
<div class="card" id="screen-log" style="display:none">
<h2>Log</h2>
<div id="log"></div>
</div>

<script>
/* ================= CONFIG ================= */
const APP_VERSION="1.0.1";
const LONDON=9738;
const STORE="policeOT";

/* ================= PAY ================= */
const PAY={
PC:[31646,32472,33789,35106,37737,43038,50256],
PS:[43698,45409,47172],
INSP:[63768,65505,67236,68982]
};

const qs=i=>document.getElementById(i);

/* ================= DISCLAIMER ================= */
function acceptDisclaimer(){
localStorage.setItem("disclaimerAccepted","1");
qs("disclaimer").style.display="none";
}
if(localStorage.getItem("disclaimerAccepted"))qs("disclaimer").style.display="none";

/* ================= TIME ================= */
function round15(m){return Math.round(m/15)*15}
function hoursBetween(s,f){
if(!s||!f)return"";
let [sh,sm]=s.split(":").map(Number);
let [fh,fm]=f.split(":").map(Number);
let m=(fh*60+fm)-(sh*60+sm);
if(m<0)m+=1440;
return(round15(m)/60).toFixed(2);
}

/* ================= OT ================= */
function loadOTPoints(){
qs("otPoint").innerHTML="";
PAY[qs("otRank").value].forEach((_,i)=>qs("otPoint").add(new Option(i+1,i)));
}
qs("otRank").onchange=loadOTPoints;
loadOTPoints();

function calcOT(){
qs("otHours").value=hoursBetween(qs("otStart").value,qs("otFinish").value);
if(!qs("otHours").value)return;
let annual=PAY[qs("otRank").value][qs("otPoint").value]+(qs("force").value==="met"?LONDON:0);
let base=annual/52/40;
let ot=base*qs("otRate").value;
let gross=(ot-base)*qs("otHours").value;
let tax=gross*(annual>50270?0.42:0.28);
qs("base").textContent=base.toFixed(2);
qs("ot").textContent=ot.toFixed(2);
qs("gross").textContent=gross.toFixed(2);
qs("tax").textContent=tax.toFixed(2);
qs("total").textContent=(gross-tax).toFixed(2);
}
["otStart","otFinish","otRate","otPoint","force"].forEach(i=>qs(i).onchange=calcOT);

/* ================= STORAGE ================= */
function load(){return JSON.parse(localStorage.getItem(STORE)||"[]")}
function save(d){localStorage.setItem(STORE,JSON.stringify(d))}

/* ================= SAVE ================= */
function saveOT(){
calcOT();
let d=load();
d.push({
type:"Overtime",
date:qs("otDate").value,
hours:qs("otHours").value,
total:qs("total").textContent
});
save(d);
renderLog();
show("log");
}

/* ================= EXPORT PDF ================= */
function exportOTPDF(){
let w=window.open("","print");
w.document.write(`<pre>
POLICE OVERTIME CLAIM

Date: ${qs("otDate").value}
Warrant: ${qs("warrant").value}
Hours: ${qs("otHours").value}
Total: £${qs("total").textContent}

Generated by Police OT App
</pre>`);
w.print();
}

/* ================= EXPORT CALENDAR ================= */
function exportOTCalendar(){
let date=qs("otDate").value.replace(/-/g,"");
let ics=`BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
SUMMARY:Police Overtime
DTSTART:${date}T${qs("otStart").value.replace(":","")}00
DTEND:${date}T${qs("otFinish").value.replace(":","")}00
END:VEVENT
END:VCALENDAR`;
download("overtime.ics",ics);
}
function exportActingCalendar(){
let date=qs("actDate").value.replace(/-/g,"");
let ics=`BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
SUMMARY:Acting Up Duty
DTSTART:${date}T${qs("actStart").value.replace(":","")}00
DTEND:${date}T${qs("actFinish").value.replace(":","")}00
END:VEVENT
END:VCALENDAR`;
download("acting.ics",ics);
}
function download(name,text){
let a=document.createElement("a");
a.href=URL.createObjectURL(new Blob([text],{type:"text/calendar"}));
a.download=name;
a.click();
}

/* ================= LOG ================= */
function renderLog(){
qs("log").innerHTML="";
load().forEach(e=>{
qs("log").innerHTML+=`
<div class="entry">
<b>${e.type}</b><br>
${e.date}<br>
${e.hours} hrs<br>
£${e.total}
</div>`;
});
}

/* ================= NAV ================= */
function show(s){
["ot","acting","log"].forEach(x=>qs("screen-"+x).style.display="none");
qs("screen-"+s).style.display="block";
qs("sideMenu").style.left="-260px";
}
qs("menuBtn").onclick=()=>{
qs("sideMenu").style.left=qs("sideMenu").style.left==="0px"?"-260px":"0px";
};
</script>

</body>
</html>
