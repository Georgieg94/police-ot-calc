<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Police OT Calculator</title>
  <style>
    :root{--bg:#f2f2f7;--card:#fff;--primary:#0a84ff;--text:#111;--muted:#8e8e93}
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}
    .card{max-width:440px;margin:16px auto;padding:20px;background:var(--card);border-radius:18px;box-shadow:0 12px 30px rgba(0,0,0,.08)}
    h1{text-align:center;margin:0 0 12px}
    label{font-weight:600;font-size:.9rem;margin-top:12px;display:block}
    select,input,button{width:100%;padding:12px;margin-top:6px;border-radius:12px;border:1px solid #ddd;font-size:1rem}
    button{background:var(--primary);color:#fff;border:none;font-weight:600;margin-top:16px}
    .result{margin-top:16px;background:#f5f5f7;padding:14px;border-radius:14px}
    .row{display:flex;justify-content:space-between;margin:6px 0}
  </style>
</head>
<body>

<div class="card">
  <h1>Police OT</h1>

  <label>Warrant Number</label>
  <input id="warrant" placeholder="e.g. 123456">

  <label>Force</label>
  <select id="force">
    <option value="met">Metropolitan Police</option>
    <option value="other">Other Home Office Force</option>
  </select>

  <label>Rank</label>
  <select id="rank"></select>

  <label>Pay Point</label>
  <select id="payPoint"></select>

  <label>Date</label>
  <input type="date" id="otDate">

  <label>Hours Worked</label>
  <input type="number" id="hours" value="9" min="0" step="0.25">

  <label>Overtime Type</label>
  <select id="otType">
    <option value="1.3333">Standard (1⅓)</option>
    <option value="1.5">Rest Day (1½)</option>
    <option value="2">Cancelled RD (Double)</option>
  </select>

  <div class="result">
    <div class="row"><span>Base Hourly</span><strong>£<span id="base">0.00</span></strong></div>
    <div class="row"><span>OT Hourly</span><strong>£<span id="ot">0.00</span></strong></div>
    <div class="row"><span>Gross</span><strong>£<span id="gross">0.00</span></strong></div>
    <div class="row"><span>Tax & NI</span><strong>-£<span id="deductions">0.00</span></strong></div>
    <div class="row"><span>Net Pay</span><strong>£<span id="net">0.00</span></strong></div>
  </div>

  <button id="saveOt">Save Overtime</button>
</div>

<script>
/* ===== PAY DATA (2024/25 + LONDON WEIGHTING) ===== */
const WEEKLY_HOURS = 40;
const LONDON_WEIGHTING = 7377; // included for Met

const PAY = {
  met: {
    weighting: LONDON_WEIGHTING,
    PC: {1:31646,2:32472,3:33789,4:35106,5:37737,6:43038,7:50256},
    PS: {2:53568,3:54660,4:56208}
  },
  other: {
    weighting: 0,
    PC: {1:31646,2:32472,3:33789,4:35106,5:37737,6:43038,7:50256},
    PS: {2:53568,3:54660,4:56208}
  }
};

/* ===== ELEMENTS ===== */
const forceEl = document.getElementById('force');
const rankEl = document.getElementById('rank');
const payPointEl = document.getElementById('payPoint');
const hoursEl = document.getElementById('hours');
const otTypeEl = document.getElementById('otType');

const baseEl = document.getElementById('base');
const otEl = document.getElementById('ot');
const grossEl = document.getElementById('gross');
const deductionsEl = document.getElementById('deductions');
const netEl = document.getElementById('net');

/* ===== LOADERS ===== */
function loadRanks(){
  rankEl.innerHTML='';
  ['PC','PS'].forEach(r=>rankEl.add(new Option(r,r)));
  loadPayPoints();
}

function loadPayPoints(){
  payPointEl.innerHTML='';
  const points = PAY[forceEl.value][rankEl.value];
  Object.keys(points).forEach(p=>payPointEl.add(new Option(p,p)));
  calculate();
}

/* ===== CALCULATION ===== */
function calculate(){
  const force = PAY[forceEl.value];
  const salary = force[rankEl.value][payPointEl.value];
  if(!salary) return;

  const annual = salary + force.weighting;
  const base = annual / 52 / WEEKLY_HOURS;
  const otRate = base * Number(otTypeEl.value);
  const hrs = Number(hoursEl.value)||0;
  const gross = otRate * hrs;

  const higher = annual > 50270;
  const tax = higher ? 0.4 : 0.2;
  const ni = higher ? 0.02 : 0.08;
  const deductions = gross * (tax + ni);

  baseEl.textContent = base.toFixed(2);
  otEl.textContent = otRate.toFixed(2);
  grossEl.textContent = gross.toFixed(2);
  deductionsEl.textContent = deductions.toFixed(2);
  netEl.textContent = (gross - deductions).toFixed(2);
}

/* ===== INIT ===== */
document.getElementById('otDate').valueAsDate = new Date();
forceEl.onchange = loadRanks;
rankEl.onchange = loadPayPoints;
payPointEl.onchange = calculate;
hoursEl.oninput = calculate;
otTypeEl.onchange = calculate;

loadRanks();
</script>
</body>
</html>
